# UI Улучшения для загрузки и статуса соединения

## Что было улучшено

### 1. **Полноэкранный индикатор загрузки при подключении**
   - Вместо маленького индикатора вверху, теперь показывается полноэкранная загрузка
   - Отображает текст "Подключение..." и "Загрузка чата"
   - Блокирует взаимодействие с чатом до полного подключения

### 2. **Компонент статуса соединения (ConnectionStatus)**
   - Новый файл: `components/chat/ConnectionStatus.tsx`
   - Отображает статус соединения в виде полоски внизу заголовка
   - Три состояния:
     - `connecting` - оранжевый индикатор "Подключение..."
     - `connected` - не отображается (нет необходимости)
     - `disconnected` - серый индикатор "Отключено"
     - `error` - красный индикатор "Ошибка соединения"

### 3. **Улучшенный MessageInput**
   - Добавлена поддержка пропса `disabled`
   - Во время подключения `disabled={true}` - поле ввода неактивно
   - Визуально отключение показывается через `opacity: 0.5`
   - Пользователь не может отправлять сообщения до подключения

### 4. **Обновлены события в ChatStore**
   - Новый метод `subscribeStatus()` для подписки на изменения статуса
   - Эмиты событий `chat:status:${dialogId}` при изменении состояния соединения
   - Состояния: "connecting", "connected", "disconnected", "error"

### 5. **Улучшена логика в компоненте чата**
   - Добавлено состояние `connectionStatus`
   - Подписка на события статуса соединения
   - Компонент ConnectionStatus отображается только если соединение не установлено

## Пользовательский опыт

### До улучшений:
- Маленький индикатор вверху
- Пользователь может попытаться отправить сообщение до подключения → ошибка
- Непонятный статус соединения

### После улучшений:
- Полноэкранная загрузка с понятным сообщением
- Поле ввода отключено до полного подключения
- Визуальный индикатор статуса соединения всегда доступен
- Ошибки соединения визуально ясны

## Файлы которые были изменены:
1. `app/(tabs)/messages/[dialogId].tsx` - добавлена подписка на статус и отображение
2. `components/chat/MessageInput.tsx` - добавлена поддержка disabled
3. `components/chat/ConnectionStatus.tsx` - новый компонент статуса
4. `services/chat.ts` - добавлены эмиты статуса и метод subscribeStatus()

